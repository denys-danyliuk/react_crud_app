(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(8),i=n.n(a),s=(n(16),n(17),n(3)),o=n.n(s),u=n(10),l=n(6),j=n(2),d=n(11),b="https://yourtestapi.com/api";function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:t};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch(b+e,c).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var m=function(e){return h(e)},O=function(e,t){return h(e,"POST",t)},f=function(e,t){return h(e,"PUT",t)},p=function(e){return h(e,"DELETE")},x=function(e){return p("/posts/".concat(e))},v=(n(19),n(20),n(0)),g=function(e){var t=e.post,n=e.onEdit,c=e.onDeletion;return Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"card-image",children:Object(v.jsx)("figure",{className:"image is-4by3",children:Object(v.jsx)("img",{src:t.image,alt:"Post"})})}),Object(v.jsxs)("div",{className:"card-content",children:[Object(v.jsx)("div",{className:"media",children:Object(v.jsx)("div",{className:"media-content",children:Object(v.jsx)("p",{className:"title is-8",children:t.title})})}),Object(v.jsxs)("div",{className:"content",children:[t.text,Object(v.jsx)("br",{}),Object(v.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:"Read more"})]})]}),Object(v.jsxs)("footer",{className:"card-footer",children:[Object(v.jsx)("button",{type:"button",className:"button is-fullwidth is-primary",onClick:function(){return n(t.title,t.text,t.url,t.image,t.id)},children:"Edit"}),Object(v.jsx)("button",{type:"button",className:"button is-fullwidth is-danger",onClick:function(){return c(t.id)},children:"Delete"})]})]})},N=n(9),y=n.n(N);var S=function(e){var t=e.name,n=e.value,r=e.label,a=void 0===r?t:r,i=e.required,s=void 0!==i&&i,o=e.onChange,u=void 0===o?function(){}:o,l=Object(c.useState)((function(){return"".concat(t,"-").concat(Math.random().toString().slice(2))})),d=Object(j.a)(l,1)[0],b=Object(c.useState)(!1),h=Object(j.a)(b,2),m=h[0],O=h[1],f=m&&s&&!n;return Object(v.jsxs)("div",{className:"field",children:[Object(v.jsx)("label",{className:"label",htmlFor:d,children:a}),Object(v.jsx)("div",{className:"control",children:Object(v.jsx)("input",{id:d,className:y()("input",{"is-danger":f}),type:"text",placeholder:"Enter ".concat(a),value:n,onChange:function(e){return u(e.target.value)},onBlur:function(){return O(!0)}})}),f&&Object(v.jsx)("p",{className:"help is-danger",children:"".concat(a," is required")})]})},k=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),i=Object(j.a)(a,2),s=i[0],b=i[1],h=Object(c.useState)(""),p=Object(j.a)(h,2),N=p[0],y=p[1],k=Object(c.useState)(""),w=Object(j.a)(k,2),C=w[0],E=w[1],T=Object(c.useState)(""),D=Object(j.a)(T,2),q=D[0],U=D[1],L=Object(c.useState)(""),P=Object(j.a)(L,2),R=P[0],F=P[1],J=Object(c.useState)(!1),M=Object(j.a)(J,2),A=M[0],B=M[1],I=Object(c.useState)(0),G=Object(j.a)(I,2),_=G[0],z=G[1],H=function(){y(""),E(""),U(""),F("")},K=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c={title:N,text:C,url:q,image:R||"https://via.placeholder.com/360x270.png?text=no%20preview"},O("/posts",Object(d.a)({},c));case 3:n=e.sent,r((function(e){return[].concat(Object(u.a)(e),[n])})),b((function(e){return e+1})),H();case 7:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e,t,n,c,r){y(e),E(t),U(n),F(c),B(!0),z(r)},V=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:r((function(e){return e.filter((function(e){return e.id!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={title:N,text:C,url:q,image:R},f("/posts/".concat(_),n);case 2:t=e.sent,r((function(e){return e.map((function(e){return e.id===_?t:e}))})),B(!1),H(),b((function(e){return e+1}));case 7:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){m("/posts").then(r)}),[]),Object(v.jsxs)("div",{className:"page",children:[Object(v.jsx)("div",{className:"page-content",children:Object(v.jsx)("div",{className:"posts",children:n.map((function(e){return Object(v.jsx)(g,{post:e,onDeletion:V,onEdit:Q},e.id)}))})}),Object(v.jsx)("div",{className:"sidebar",children:Object(v.jsxs)("form",{className:"NewMovie",onSubmit:K,children:[Object(v.jsx)("h2",{className:"title",children:"Add a movie"}),Object(v.jsx)(S,{name:"title",label:"Title",value:N,onChange:y,required:!0}),Object(v.jsx)(S,{name:"text",label:"Description",value:C,onChange:E,required:!0}),Object(v.jsx)(S,{name:"url",label:"Post URL",value:q,onChange:U,required:!0}),Object(v.jsx)(S,{name:"imgURL",label:"Img URL",value:R,onChange:F}),Object(v.jsx)("div",{className:"field is-grouped",children:Object(v.jsx)("div",{className:"control",children:A?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{type:"button",className:"button is-light is-success mr-3",onClick:W,children:"Save"}),Object(v.jsx)("button",{type:"button",className:"button is-light is-danger",onClick:function(){y(""),E(""),U(""),F(""),B(!1)},children:"Cancel editing"})]}):Object(v.jsx)("button",{type:"submit",className:"button is-link",disabled:!N.trim()||!C.trim()||!q.trim(),children:"Add"})})})]},s)})]})};i.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(k,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.3a2c6a97.chunk.js.map